plugins {
    id 'java'
    id 'idea'
    id 'net.neoforged.gradle.userdev' version '7.0.182'
}

if (file('src/main/resources/META-INF/accesstransformer.cfg').exists()) {
    minecraft.accessTransformers.file file('src/main/resources/META-INF/accesstransformer.cfg')
}

sourceSets.main.resources { srcDir 'src/generated/resources' }

dependencies {
    implementation "net.neoforged:neoforge:${neoforge_version}"
    compileOnly project(":api")
    compileOnly project(":common")

    compileOnly "curse.maven:kubejs-238086:5810100"
    compileOnly "curse.maven:rhino-416294:6184623"
    compileOnly "curse.maven:lootjs-570630:6329532"
}

// NeoGradle compiles the game, but we don't want to add our common code to the game's code
Spec<Task> notNeoTask = { Task it -> !it.name.startsWith("neo") } as Spec<Task>

tasks.named('jar').configure {
    enabled = false
}

tasks.named('assemble').configure {
    enabled = false
}

tasks.named('build').configure {
    enabled = false
}

tasks.named('compileJava').configure {
    enabled = false
}